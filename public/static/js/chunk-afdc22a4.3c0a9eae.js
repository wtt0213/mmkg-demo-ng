(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afdc22a4"],{"0c09":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"main width-limit"},[n("div",{staticClass:"analysis"},[n("EventExtraction",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"event",staticClass:"event-box",attrs:{data:t.casedata1}})],1)])])},o=[],i=n("87d1"),a=n("1fd8"),s={name:"extract",components:{EventExtraction:i["a"]},data:function(){return{show:!0,casedata1:a["a"],casedata2:a["b"]}},mounted:function(){1===this.$route.params.id?this.show=!0:this.show=!1},methods:{change:function(t){this.show=t}}},c=s,l=(n("4861"),n("cba8")),u=Object(l["a"])(c,r,o,!1,null,"5fe59839",null);e["default"]=u.exports},"1fd8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r={events:[{trigger:{id:21,text:"治疗",offset:5,length:2,ner:""},arguments:[{text:"姜糖水",role:"subject",offset:0,length:3,ner:null},{text:"风寒导致的感冒",role:"object",offset:8,length:7,ner:null}],type:"na",text:"姜糖水可以治疗由风寒导致的感冒。",description:"姜糖水可以治疗由风寒导致的感冒",time:null,text_offset:0},{trigger:{id:21,text:"制造出",offset:24,length:3,ner:""},arguments:[{text:"中美科研团队",role:"subject",offset:0,length:6,ner:null},{text:"首个由人类细胞和猴子细胞共同组成的胚胎",role:"object",offset:27,length:19,ner:null}],type:"na",text:"中美科研团队在最新一期《细胞》杂志撰文称, 他们制造出首个由人类细胞和猴子细胞共同组成的胚胎, 这些嵌合体有助科学家进一步在其它物种体内（如猪）培育出人体组织, 但最新研究也引发了一些伦理争议。",description:"中美科研团队在最新一期《细胞》杂志撰文称, 他们制造出首个由人类细胞和猴子细胞共同组成的胚胎, 这些嵌合体有助科学家进一步在其它物种体内（如猪）培育出人体组织, 但最新研究也引发了一些伦理争议。",time:null,text_offset:0}],text:"中美科研团队在最新一期《细胞》杂志撰文称, 他们制造出首个由人类细胞和猴子细胞共同组成的胚胎, 这些嵌合体有助科学家进一步在其它物种体内（如猪）培育出人体组织, 但最新研究也引发了一些伦理争议。"},o={events:[{trigger:{id:21,text:"指认",offset:7,length:2,ner:""},arguments:[{text:"犯罪嫌疑人程某",role:"subject",offset:0,length:7,ner:null},{text:"涉案自行车",role:"object",offset:9,length:5,ner:null}],type:"na",text:"犯罪嫌疑人程某指认涉案自行车青浦区检察院供图“早知道这么贵我就不偷了",description:"犯罪嫌疑人程某指认涉案自行车青浦区检察院供图“早知道这么贵我就不偷了。",time:null,text_offset:0},{trigger:{id:21,text:"偷走",offset:15,length:2,ner:""},arguments:[{text:"被告人程某",role:"subject",offset:4,length:5,ner:null},{text:"一辆折叠自行车",role:"object",offset:18,length:7,ner:null}],type:"na",text:"62岁的被告人程某因贪小便宜，偷走了一辆折叠自行车。",description:"62岁的被告人程某因贪小便宜，偷走了一辆折叠自行车。",time:null,text_offset:0},{trigger:{id:21,text:"被判处",offset:45,length:3,ner:""},arguments:[{text:"程某",role:"subject",offset:37,length:2,ner:null},{text:"有期徒刑十个月",role:"object",offset:48,length:7,ner:null}],type:"na",text:"9月24日，澎湃新闻记者从上海市青浦区检察院获悉，经该院以盗窃罪提起公诉，程某于9月17日被判处有期徒刑十个月，并处罚金人民币三千元。",description:"9月24日，澎湃新闻记者从上海市青浦区检察院获悉，经该院以盗窃罪提起公诉，程某于9月17日被判处有期徒刑十个月，并处罚金人民币三千元。",time:null,text_offset:0},{trigger:{id:21,text:"处罚金",offset:57,length:3,ner:""},arguments:[{text:"程某",role:"subject",offset:37,length:2,ner:null},{text:"人民币三千元",role:"object",offset:60,length:6,ner:null}],type:"na",text:"9月24日，澎湃新闻记者从上海市青浦区检察院获悉，经该院以盗窃罪提起公诉，程某于9月17日被判处有期徒刑十个月，并处罚金人民币三千元。",description:"9月24日，澎湃新闻记者从上海市青浦区检察院获悉，经该院以盗窃罪提起公诉，程某于9月17日被判处有期徒刑十个月，并处罚金人民币三千元。",time:null,text_offset:0}],text:"中美科研团队在最新一期《细胞》杂志撰文称, 他们制造出首个由人类细胞和猴子细胞共同组成的胚胎, 这些嵌合体有助科学家进一步在其它物种体内（如猪）培育出人体组织, 但最新研究也引发了一些伦理争议。"}},3441:function(t,e,n){"use strict";var r=n("e99b"),o=n("3250"),i=n("8078"),a=n("0926"),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n("95b6")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),o(t))}})},"3b17":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"n",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"j",(function(){return l})),n.d(e,"m",(function(){return u})),n.d(e,"i",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"h",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return v})),n.d(e,"k",(function(){return b}));var r=n("b775");function o(t){var e=t.url,n=t.method,o=t.params,i=t.data;return Object(r["a"])({url:e,method:n,params:o,data:i})}function i(t){return Object(r["a"])({url:"/api/kg/feedback/",method:"post",data:t})}function a(t){return Object(r["a"])({url:"/api/nlp/featureset/",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/api/nlp/relation/",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/api/nlp/attribute/",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/api/nlp/ner/",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/api/nlp/showcase/",method:"get",params:t})}function f(t,e){return Object(r["a"])({url:"/api/kg/hotevent/".concat(t,"/events/"),method:"post",data:e})}function d(t){return Object(r["a"])({url:"/api/kg/entities/count/",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/api/kg/hotevent/",method:"get",params:t})}function p(){return Object(r["a"])({url:"/api/kg/hotevent/classification/",method:"get"})}function g(t){return Object(r["a"])({url:"/api/record/entity/annotate",method:"get",params:t})}function v(t){return Object(r["a"])({url:"/api/record/entity/category",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/api/record/entity/search",method:"get",params:t})}},4861:function(t,e,n){"use strict";n("b319")},"87d1":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.events.length>0,expression:"events.length > 0"},{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"event"},[n("div",{staticClass:"answer"},[t._l(t.events,(function(e,r){return n("div",{key:r,staticClass:"answer-item"},[n("div",{staticClass:"event-title"},[n("div",{staticClass:"index"},[t._v(t._s(r+1))]),t._v(" "),e.type_cn?n("el-tag",{staticClass:"event-type",attrs:{size:"mini",effect:"dark",type:""}},[t._v(t._s(e.type_cn))]):t._e(),t._v(" "),n("div",{staticStyle:{flex:"1"}},[t._v(t._s(e.event))])],1),t._v(" "),n("div",{staticClass:"event-ne-sentence",domProps:{innerHTML:t._s(e.neSentence)}}),t._v(" "),n("div",{staticStyle:{width:"600px","margin-left":"26px"}}),t._v(" "),t.labelVisible?n("div",{staticClass:"feedback-span"}):t._e()])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.events.length,expression:"!events.length"}],staticStyle:{"text-align":"center",margin:"10px"}},[t._v("无相关结果")])],2)])},o=[],i=(n("ac67"),n("3839")),a=(n("8dee"),n("c1a2")),s=(n("3441"),n("32ea"),n("1bc7"),n("3b17"));function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=["#2196f3","#33ab9f","#4caf50","#6573c3","#009688","#b28704","#9c27b0","#33ab9f","#f44336","#009688","#4dabf5","#e91e63","#90cb4c","#aa2e25","#3f51b5","#0f44ef","#af52bf"],f={name:"EventExtraction",components:{},props:{config:{},api:{},isShow:{},labelVisible:{type:Boolean,default:!1},data:{}},data:function(){return{events:[],colorDict:{},eventLoading:!1,isLoading:!1,inputTxt:"",eventBodyType:{},colorIdx:0,roleEn2Zh:{trigger:"谓词",subject:"事件主体",object:"事件客体",infer_time:"推断时间",loc:"地点",time:"时间",description:"描述",weapon:"涉及实体(武器装备)",country:"涉及国家",subject_count:"主体数量",object_count:"客体数量"},activeNames:"1",collapseIcon:"el-icon-caret-bottom"}},methods:{setFeedback:function(t){var e=this.events[t].text,n=this.events[t].debug_info;this.$emit("showFeedbackDialog",{text:e,type:"event",debug_info:n})},display:function(t){this.events=t.events;var e=this;this.getResFlag=!0,this.events=t.events.map((function(t){var n=t.text,r=t.description,o=[],i=[],a={};t.arguments.forEach((function(t){"subject"===t.role||"object"===t.role?o.push(t):void 0===a[e.roleEn2Zh[t.role]]?a[e.roleEn2Zh[t.role]]=t.text:(a[e.roleEn2Zh[t.role]]+=", ",a[e.roleEn2Zh[t.role]]+=t.text)}));for(var s="",c=0;c<Object.keys(a).length;c++)s=Object.keys(a)[c],i.push({key:s,value:a[s]});var l=t.trigger;l.role="trigger",o.push(l),o.sort((function(t,e){return e.offset-t.offset}));for(var u=0;u<o.length;u++){var f=o[u],d="";d+='class="title-'+f.role+'" ',d+='data-title="'+e.roleEn2Zh[f.role]+'" ',d+=e.eventBodyType[f.ner]?'data-body-type="'+e.eventBodyType[f.ner]+'" ':"";var h="<span "+d+">"+f.text+"</span>";n=n.substring(0,f.offset)+h+n.substring(f.offset+f.length)}var p=e.genNeSentence(t.text,o,t.text_offset);return i.sort((function(t,e){return e.key.charCodeAt()-t.key.charCodeAt()})),{event:r,neSentence:p,text:t.text,argument:i,type_cn:t.type_cn,debug_info:JSON.stringify(t)}}))},genNeSentence:function(t,e,n){for(var r=this,o=[],i=0;i<e.length;i++)e[i].offset=e[i].offset-n;e.forEach((function(t){t.length&&"number"===typeof t.offset&&(o[t.offset]||(o[t.offset]=[]),o[t.offset].push(l(l({},t),{},{position:"begin"})),o[t.offset+t.length]||(o[t.offset+t.length]=[]),o[t.offset+t.length].unshift({position:"end",title:t.role}))}));for(var a=[],s=0;s<t.length+1;s++){var c="";o[s]&&(c=o[s].map((function(t){if("begin"===t.position){var e=r.roleEn2Zh[t.role];return'<span\n                data-title="'.concat(e,'"\n                class="event-title-').concat(e,'"\n                style="--tooltip-color: ').concat(r.getColor(e),'">').replace(/\s+/g," ")}return"</span>"})).join("")),a.push(c+(t[s]||""))}return a=a.join(""),a},getColor:function(t){return t===this.roleEn2Zh.trigger?"red":(this.colorDict[t]||(this.colorDict[t]=u[this.colorIdx],this.colorIdx++),this.colorDict[t])},analyze:function(t){var e=this;return this.inputTxt=t,this.isLoading=!0,new Promise((function(n,r){var o=e.api.fontend_url,a=e.api.fontend_method,c="",l={text:t};l.kg_id=e.$route.params.kg_id,"object"===Object(i["a"])(t)&&(l={feature_set:t}),Object(s["a"])({url:o,method:a,params:c,data:l}).then((function(t){e.display(t),n()})).catch((function(t){console.log(t),r(t)})).then((function(){e.isLoading=!1}))}))},run:function(t){var e=this;this.events=[],this.$nextTick((function(){return e.analyze(t)}))},handleCollapse:function(){"el-icon-caret-right"===this.collapseIcon?this.collapseIcon="el-icon-caret-bottom":this.collapseIcon="el-icon-caret-right"},cellStyle:function(t){if("key"===t.column.property)return"background: #F0F7FC"}},mounted:function(){this.display(this.data)}},d=f,h=(n("e717"),n("cba8")),p=Object(h["a"])(d,r,o,!1,null,"773aaeb9",null);e["a"]=p.exports},"95b6":function(t,e,n){"use strict";var r=n("0926");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},b319:function(t,e,n){},e717:function(t,e,n){"use strict";n("f5fd")},f5fd:function(t,e,n){}}]);